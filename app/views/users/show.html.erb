<% content_for :title, @user.name %>
<div class="row">
    <div class="col-md-3"><%= render 'user_sidebar' %></div>
    <div class="col-md-9">
        <%= render 'follow_form' if logged_in? %>
        <% if @user_articles.empty? %>
            <div class="well"><%= @user.name %> hasn't posted anything yet.</div>
        <% else %>
            <div class="posts-wrapper">
                <h2 class="section-title"><span class="section-division">+</span>
                    <% if current_user?(@user) %>My articles
                    <% else %><%= @user.name %>'s articles<% end %>
                </h2>
                <% @user_articles.order('updated_at DESC').each do |article| %>
                    <div class="media">
                        <div class="media-body">
                            <div class="btn-group pull-right">
                                <button class="btn btn-danger btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false">
                                    <span class="glyphicon glyphicon-cog"></span>
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li><%= link_to 'Read more', article %></li>
                                    <% if current_user?(article.user) %>
                                        <li><%= link_to 'Update article', edit_article_path(article) %></li>
                                        <li><%= link_to 'Delete article', article, method: :delete, data: { confirm: 'Do you want to delete this article?' } %></li>
                                    <% end %>
                                </ul>
                            </div>
                            <h3 class="media-heading"><%= link_to article, class: 'article-title' do %><%= article.title %><% end %></h3>
                            <% unless article.tags.to_a.empty? %>
                                <div class="article-tags">
                                    <span class="glyphicon glyphicon-tags"></span>
                                    <% article.tags.each do |tag| %>
                                        <a href="<%= tag_path(tag) %>"><span class="badge"><%= tag.name %></span></a>
                                    <% end %>
                                </div>
                            <% end %>
                            <p class="post-timer"><span class="glyphicon glyphicon-time"></span>
                                Last Update: <%= article.updated_at.strftime('%H:%M:%S - %b %d, %Y') %>
                            </p>
                            <%= image_tag(article.picture.url, class: 'article-picture') if article.picture? %>
                            <p><%= truncate(article.content, length: 400) %></p>
                        </div>
                    </div>
                <% end %>
                <div class="text-center"><%= will_paginate @user_articles, previous_label: '&laquo;', next_label: '&raquo;' %></div>
            </div>
        <% end %>
    </div>
</div>

